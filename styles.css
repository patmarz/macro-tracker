:root{
  --bg:#f5f7fb; --card:#ffffff; --text:#1c1e21; --muted:#6b7280;
  --primary:#0b84fe; --accent:#22c55e; --danger:#ef4444; --shadow:0 8px 20px rgba(0,0,0,.08);
  --radius:16px; --border:#e5e7eb; --soft:#f8fafc;
}
@media (prefers-color-scheme: dark) {
  :root{ --bg:#0b0d10; --card:#12151a; --text:#e6e7ea; --muted:#9aa3b2; --border:#232830; --soft:#151a22; --shadow:0 8px 20px rgba(0,0,0,.4) }
}
[data-theme="light"]{ --bg:#f5f7fb; --card:#ffffff; --text:#1c1e21; --muted:#6b7280; --border:#e5e7eb; --soft:#f8fafc; }
[data-theme="dark"]{ --bg:#0b0d10; --card:#12151a; --text:#e6e7ea; --muted:#9aa3b2; --border:#232830; --soft:#151a22; }

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  background:var(--bg); color:var(--text);
}
.container{max-width:780px;margin:0 auto;padding:16px 14px 100px}
.header{
  position:sticky;top:0;z-index:5;background:linear-gradient(180deg, color-mix(in oklab, var(--bg), white 8%), color-mix(in oklab, var(--bg), transparent 50%));
  backdrop-filter:saturate(180%) blur(10px); padding:10px 14px 12px; border-bottom:1px solid color-mix(in oklab, var(--border), transparent 60%);
}
.brand{display:flex;gap:12px;align-items:center}
.brand img{width:32px;height:32px;border-radius:8px}
.brand h1{font-size:20px;margin:0}
.version{font-size:12px;color:var(--muted)}
.card{
  background:var(--card); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow);
  padding:14px; margin:12px 0;
}
.grid{display:grid;gap:10px}
@media (min-width:640px){ .grid{grid-template-columns:repeat(2,1fr)} }
.row{display:flex;gap:10px}
.row>*{flex:1}
input, textarea, select, button{
  width:100%; padding:12px 12px; border:1px solid var(--border); border-radius:12px; font-size:16px; background:var(--card); color:var(--text);
}
textarea{min-height:72px; resize:vertical}
button{border:none; cursor:pointer}
.btn{background:var(--primary);color:white;font-weight:600}
.btn:active{transform:translateY(1px)}
.btn-secondary{background:#e5e7eb;color:#111827}
[data-theme="dark"] .btn-secondary{background:#1f2937;color:#e5e7eb;border-color:#374151}
.btn-danger{background:var(--danger);color:white}
.btn-ghost{background:transparent;border:1px dashed var(--border);color:var(--muted)}
.toolbar{display:flex;gap:10px;flex-wrap:wrap}
.kpi{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
.kpi .item{background:var(--soft);border-radius:12px;padding:10px;text-align:center;border:1px solid var(--border);position:relative;overflow:hidden}
.kpi .label{font-size:12px;color:var(--muted)}
.kpi .value{font-size:18px;font-weight:700;margin-top:2px}
.kpi .item::after{content:"";position:absolute;left:0;bottom:0;height:4px;width:calc(var(--pct,0)*100%);
  background: linear-gradient(90deg, var(--primary), var(--accent)); transition: width .25s ease;}
.kpi .item.hit { outline: 2px solid color-mix(in oklab, var(--accent), transparent 60%); }
table{width:100%;border-collapse:separate;border-spacing:0 8px}
thead th{font-size:12px;color:var(--muted);text-align:left;padding:0 8px}
tbody tr{background:var(--card);box-shadow:var(--shadow)}
tbody td{padding:10px 8px;border-top:1px solid var(--border);border-bottom:1px solid var(--border)}
tbody td.actions{white-space:nowrap;text-align:right}
.badge{display:inline-block;padding:4px 8px;border-radius:999px;background:#eff6ff;color:#1d4ed8;font-weight:600;font-size:12px}
[data-theme="dark"] .badge{background:#1e293b;color:#93c5fd}
footer{
  position:fixed;bottom:0;left:0;right:0;padding:10px 14px;background:linear-gradient(0deg, color-mix(in oklab, var(--bg), white 8%), color-mix(in oklab, var(--bg), transparent 50%));
  border-top:1px solid color-mix(in oklab, var(--border), transparent 60%); display:flex;justify-content:space-between;align-items:center;gap:8px
}
.small{font-size:12px;color:var(--muted)}
.hidden{display:none}
input[type="date"]{padding:10px 12px}
a, button, input, textarea{ -webkit-tap-highlight-color: rgba(0,0,0,0); }

/* Modal */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.35);display:none;align-items:center;justify-content:center;padding:16px}
.modal.open{display:flex}
.modal .panel{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow);padding:16px;max-width:520px;width:100%}
.modal .panel h3{margin:0 0 10px}
.modal .actions{display:flex;gap:10px;justify-content:flex-end;margin-top:10px}

/* Update toast */
.toast{position:fixed;left:50%;transform:translateX(-50%);bottom:80px;background:var(--card);border:1px solid var(--border);
padding:10px 12px;border-radius:999px;display:none;gap:10px;align-items:center;box-shadow:var(--shadow)}
.toast.show{display:flex}

/* Validation hint */
.hint{font-size:12px;color:var(--muted);margin-top:6px}
.warn{color:#b45309}
.err{color:#dc2626}
